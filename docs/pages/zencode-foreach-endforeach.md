
# Looping: Foreach/EndForeach statements

Zenroom allows looping, done using the **Foreach** and **EndForeach** statements.
There are two possible way of looping that are, over an array
```gherkin
Foreach 'element' in 'array'
```
or from a number to another with certain step
```gherkin
Foreach 'i' in sequence from 'zero' to 'ten' with step 'one'
```
As can be seen the keyword **Foreach** is the one that indicates the start of a loop, while
the statement **EndForeach** indicates the ends of loop.
When reaching it if the condition of the foreach is still valid the loop is performed again.

Inside a **Foreach** you can use:
* **Foreach** statements (any of them must have a corresponding **EndForeach**)
* [**If**](zencode-if-endif) statements that must be closed before the loop end. Morever, even if the basic **If** support
the use of **Then** in it, when it is inside a loop this last property is not true anymore, only **When** statements can be used.
* [**When**](zencode-cookbook-when) statements

## Simple Foreach/EndForeach example

In the following script we are looping over all the elements of an array and simply copying them into a new one.

[](../_media/examples/zencode_cookbook/foreach/verysimple.zen ':include :type=code gherkin')

Indeed if run with data

[](../_media/examples/zencode_cookbook/foreach/verysimple.data ':include :type=code json')

the result will be

[](../_media/examples/zencode_cookbook/foreach/verysimple.out ':include :type=code json')


## Break from a Foreach loop

The
```gherkin
When I break the foreach
# or equivalently
When I exit the foreach
```
statements allow you to exit a foreach loop prematurely. When executed, it immediately terminates the loop's iteration, skipping
any remaining items in the collection or sequence. The program then continues with the first statement following the loop.

The break statement is typically used when a specific condition is met within the loop,
and further iteration is unnecessary or undesirable. An example to understand the foreach and the break can be the following:

Display only those numbers from the list:

[](../_media/examples/zencode_cookbook/educational/foreach_divisible_by_five.data.json ':include :type=code json')

that satisfy the following conditions:
1. The number must be divisible by five
1. If the number is greater than 150, then skip it and move to the following number
1. If the number is greater than 500, then stop the loop

We start by defineing some usefull variables in a file that we will use as keys file

[](../_media/examples/zencode_cookbook/educational/foreach_divisible_by_five.keys.json ':include :type=code json')

then the code will be

[](../_media/examples/zencode_cookbook/educational/foreach_divisible_by_five.zen ':include :type=code gherkin')

resulting in

[](../_media/examples/zencode_cookbook/educational/foreach_divisible_by_five.out.json ':include :type=code json')

## More complex Foreach/EndForeach example

You can play with them as much as you want, like:

[](../_media/examples/zencode_cookbook/branching/nested_if_in_foreach.zen ':include :type=code gherkin')

that with input data

[](../_media/examples/zencode_cookbook/branching/nested_if_in_foreach.data.json ':include :type=code json')

will result in

[](../_media/examples/zencode_cookbook/branching/nested_if_in_foreach.out.json ':include :type=code json')

# The script used to create the material in this page

All the smart contracts and the data you see in this page are generated by the scripts [branching.bats](https://github.com/dyne/Zenroom/blob/master/test/zencode/branching.bats),
[foreach.bats](https://github.com/dyne/Zenroom/blob/master/test/zencode/foreach.bats) and
[branching.bats](https://github.com/dyne/Zenroom/blob/master/test/zencode/educational.bats).
If you want to run the scripts (on Linux) you should:
 - *git clone https://github.com/dyne/Zenroom.git*
 - install  **jq**
 - download a [zenroom binary](https://zenroom.org/#downloads) and place it */bin* or */usr/bin* or in *./Zenroom/src*
