<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8">
		<meta name="viewport" content="width=device-width, initial-scale=1">
		<title>Smart contracts in human language - Zenroom docs</title>
		<meta name="description" content="Zenroom is a portable and independent virtual machine for secure cryptographic operations. Zencode is the name of the language executed by Zenroom: it is simple to understand and can process large data structures while operating cryptographic transformations on them." />
		<meta name="keywords" content="crypto, security, iot, blockchain" />
		<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
		<meta property="og:title" content="Smart contracts in human language" />
		<meta property="og:description" content="Zenroom is a portable and independent virtual machine for secure cryptographic operations. Zencode is the name of the language executed by Zenroom: it is simple to understand and can process large data structures while operating cryptographic transformations on them." />
		<meta property="og:type" content="website" />
		<meta property="og:url" content="https://dev.zenroom.org" />
		<meta name="twitter:card" content="summary_large_image">
		<meta name="twitter:site" content="@DyneOrg">
		<meta name="twitter:title" content="Smart contracts in human language">
		<meta name="twitter:description" content="Zenroom is a portable and independent virtual machine for secure cryptographic operations. Zencode is the name of the language executed by Zenroom: it is simple to understand and can process large data structures while operating cryptographic transformations on them.">

		<link rel="stylesheet" href="../assets/css/bulma.min.css">
		<link rel="stylesheet" href="../assets/css/bulma-dyne.css">
		<link rel="stylesheet" href="../assets/css/materialdesignicons.min.css">
		<link rel="stylesheet" href="../assets/css/codehilite.css">

		
		<script type="text/javascript" src="../js/cash.min.js"></script>
		

		
		<link rel="stylesheet" href="../css/montserrat.css">
		
		<link rel="stylesheet" href="../css/custom.css">
		

		

		

	</head>

	<body>
		<nav class="navbar has-shadow is-transparent">
    <div class="navbar-brand">
        <a class="navbar-item" href="..">
			
			<img src="../img/zenroom_logo.jpg">
			
        </a>
    </div>
	
	<div id="navbarExampleTransparentExample" class="navbar-menu">
        <div class="navbar-start">
			<div class="navbar-item">
				Zenroom: portable, secure and independent crypto language
			</div>
		</div>
	</div>
	
        <div class="navbar-end">
            <div class="navbar-item">
                <div class="field is-grouped">
                    <p class="control">
                        <a href="https://dyne.org">
							<!-- https://img.shields.io/badge/made%20with%20%E2%9D%A4%20by-Dyne.org-turquoise.svg?style=for-the-badge&logo=gnu -->
                            <img src="../assets/img/made_by_dyne.svg" alt="Made with love by Dyne.org" title="We are free to share code and we code to share Freedom"></a>
                    </p>
                </div>
            </div>
        </div>
    </div>
</nav>
		<section class="section">
			<div class="container">
				<div class="columns">
					<div class="column is-one-quarter">
						<aside class="menu">
    
    <h1 class="menu-label">
        <span class="mdi mdi-fire has-text-danger"></span> Quick Links</h1>
    <ul class="menu-list" style="list-style: none">
        
        <li><span class="mdi mdi-home"></span><a href="https://zenroom.org">Home</a></li>
        

        
        <li><span class="mdi mdi-book-open-page-variant"></span><a href="https://dev.zenroom.org">Documentation</a></li>
        

        
        <li><span class="mdi mdi-download"></span><a href="/#download">Download</a></li>
        
        
        <li><span class="mdi mdi-github-circle"></span><a href="https://github.com/decodeproject/Zenroom/">Source Code</a></li>
        
        
        

        
        <li><span class="mdi mdi-history"></span><a href="/changelog">Log of changes</a></li>
        

        
        <li><span class="mdi mdi-account-edit"></span><a href="https://github.com/decodeproject/zenroom/wiki">Wiki</a></li>
        

        
    </ul>
    

    <hr width="20%">

    <h1 class="menu-label">
        <span class="mdi mdi-format-list-numbered has-text-primary"></span> Table of Contents</h1>
    <ul class="menu-list">
        
        <li>
            <a href="#smart-contracts-in-human-language">Smart contracts in human language</a>
            
        </li>
        
        <li>
            <a href="#attribute-based-credentials">Attribute Based Credentials</a>
            
                
  <ul>
    
      <li><a href="#centralized-credential-issuance">Centralized credential issuance</a></li>
      
    
  </ul>

            
        </li>
        
        <li>
            <a href="#zero-knowledge-proofs">Zero Knowledge Proofs</a>
            
        </li>
        
        <li>
            <a href="#symmetric-encryption">Symmetric encryption</a>
            
        </li>
        
        <li>
            <a href="#asymmetric-encryption">Asymmetric encryption</a>
            
                
  <ul>
    
      <li><a href="#key-generation-and-exchange">Key generation and exchange</a></li>
      
    
      <li><a href="#public-key-encryption-ecdh">Public-key Encryption (ECDH)</a></li>
      
    
      <li><a href="#public-key-signature-ecdsa">Public-key Signature (ECDSA)</a></li>
      
    
  </ul>

            
        </li>
        
        <li>
            <a href="#syntax-and-memory-model">Syntax and Memory model</a>
            
                
  <ul>
    
      <li><a href="#given">Given</a></li>
      
  <ul>
    
      <li><a href="#self-introduction">Self introduction</a></li>
      
    
  </ul>

    
      <li><a href="#when">When</a></li>
      
    
      <li><a href="#then">Then</a></li>
      
    
  </ul>

            
        </li>
        
    </ul>
</aside>
					</div>
					<div class="column">
						
						<div class="content">
							 <h1 id="smart-contracts-in-human-language">Smart contracts in human language</h1>
<p>Zenroom is software inspired by the <a href="http://langsec.org">language-theoretical security</a> research and it allows to express cryptographic operations in a readable domain-specific language called <strong>Zencode</strong>.</p>
<p>For the theoretical background see the <a href="https://files.dyne.org/zenroom/Zencode_Whitepaper.pdf">Zencode Whitepaper</a>.</p>
<p>For an introduction see this blog post: <a href="https://decodeproject.eu/blog/smart-contracts-english-speaker">Smart contracts for the English speaker</a>.</p>
<p>Here we go with the <span class="big"><strong>tutorial to learn the Zencode language!</strong></span></p>
<h1 id="attribute-based-credentials">Attribute Based Credentials</h1>
<p><img alt="Alice in Wonderland" src="../img/alice_with_cards-sm.jpg" /></p>
<p>Attribute Based Credentials are a powerful and complex feature
implemented using the <a href="https://arxiv.org/pdf/1802.07344.pdf">Coconut crypto
scheme</a>. We start this tutorial
with the most complex functionality available in Zenroom to show how
the Zencode language really simplifies it all.</p>
<p>Let's imagine 3 different subjects for our scenarios:</p>
<ol>
<li><strong>Mad Hatter</strong> is a well known <strong>issuer</strong> in Wonderland</li>
<li><strong>Wonderland</strong> is an open space (a blockchain!) and all inhabitants can check the validity of <strong>proofs</strong></li>
<li><strong>Alice</strong> just arrived: to create <strong>proofs</strong> she'll request a <strong>credential</strong> to the issuer <strong>MadHatter</strong> </li>
</ol>
<p>When <strong>Alice</strong> is in possession of <strong>credentials</strong> then she can
create a <strong>proof</strong> any time she wants using as input:</p>
<ul>
<li>the <strong>credentials</strong></li>
<li>her <strong>credential keypair</strong></li>
<li>the <strong>verifier</strong> by MadHatter</li>
</ul>
<div class="codehilite"><pre><span class="nf">Scenario coconut: create proof</span>
<span class="k">Given </span><span class="nf">that I am known as &#39;Alice&#39;</span>
<span class="nf">and I have my valid &#39;credential keypair&#39;</span>
<span class="nf">and I have a valid &#39;verifier&#39; from &#39;MadHatter&#39;</span>
<span class="nf">and I have my valid &#39;credentials&#39;</span>
<span class="k">When </span><span class="nf">I aggregate the verifiers</span>
<span class="nf">and I create the credential proof</span>
<span class="k">Then </span><span class="nf">print the &#39;credential proof&#39;</span>
</pre></div>


<p>All these "things" (credentials, proofs, etc.) are data structures that can be used as input and received as output of Zencode functions. For instance a <strong>proof</strong> can be print in <strong>JSON</strong> format and looks a bit list this:</p>
<div class="codehilite"><pre><span class="p">{</span>
   <span class="nt">&quot;credential_proof&quot;</span> <span class="p">:</span> <span class="p">{</span>
      <span class="nt">&quot;pi_v&quot;</span> <span class="p">:</span> <span class="p">{</span>
         <span class="nt">&quot;c&quot;</span> <span class="p">:</span> <span class="s2">&quot;u64:tBrCGawWYEAi55_hHIPq0JT3OaapOebSHVW0GhjJcAk&quot;</span><span class="p">,</span>
         <span class="nt">&quot;rr&quot;</span> <span class="p">:</span> <span class="s2">&quot;u64:J7R3FXsI2dcfyZRCqWA8fDYijG39P16LvGpX90wtCWw&quot;</span><span class="p">,</span>
         <span class="nt">&quot;rm&quot;</span> <span class="p">:</span> <span class="s2">&quot;u64:QoG-28CNTAY3Ir4SQqVoK1ZpTlzOnXxX6Xtq5KMIxpo&quot;</span>
      <span class="p">},</span>
      <span class="nt">&quot;nu&quot;</span> <span class="p">:</span> <span class="s2">&quot;u64:BA77WYvBRsc53uAyrqTjuUdptJPZbcTlzr9icizm0...&quot;</span><span class="p">,</span>
      <span class="nt">&quot;sigma_prime&quot;</span> <span class="p">:</span> <span class="p">{</span>
         <span class="nt">&quot;h_prime&quot;</span> <span class="p">:</span> <span class="s2">&quot;u64:BB9AM5xjWPxsZ47zh1WAmFymru66W6YuK...&quot;</span><span class="p">,</span>
         <span class="nt">&quot;s_prime&quot;</span> <span class="p">:</span> <span class="s2">&quot;u64:BAGYNM6JO0wRAGE87_-bQVuhUXeEoeJrh...&quot;</span>
      <span class="p">},</span>
      <span class="nt">&quot;kappa&quot;</span> <span class="p">:</span> <span class="s2">&quot;u64:GFVYsudbHOJNzPl3ZL0_VzB_DRvrPKF26OCZR9...&quot;</span>
   <span class="p">},</span>
   <span class="nt">&quot;zenroom&quot;</span> <span class="p">:</span> <span class="p">{</span>
      <span class="nt">&quot;scenario&quot;</span> <span class="p">:</span> <span class="s2">&quot;coconut&quot;</span><span class="p">,</span> <span class="nt">&quot;encoding&quot;</span> <span class="p">:</span> <span class="s2">&quot;url64&quot;</span><span class="p">,</span> <span class="nt">&quot;version&quot;</span> <span class="p">:</span> <span class="s2">&quot;1.0.0&quot;</span>
   <span class="p">}</span>
<span class="p">}</span>
</pre></div>


<p>Anyone can verify proofs using as input:</p>
<ul>
<li>the <strong>credential proof</strong></li>
<li>the <strong>verifier</strong> by MadHatter</li>
</ul>
<div class="codehilite"><pre><span class="nf">Scenario coconut: verify proof</span>
<span class="k">Given </span><span class="nf">that I have a valid &#39;verifier&#39; from &#39;MadHatter&#39;</span>
<span class="nf">and I have a valid &#39;credential proof&#39;</span>
<span class="k">When </span><span class="nf">I aggregate the verifiers</span>
<span class="nf">and I verify the credential proof</span>
<span class="k">Then </span><span class="nf">print &#39;Success&#39; &#39;OK&#39; as &#39;string&#39;</span>
</pre></div>


<p>What is so special about these proofs? Well!  Alice cannot be followed
by her trail of proofs: <strong>she can produce an infinite number of
proofs, always different from one another</strong>, for anyone to recognise
the credential without even knowing who she is.</p>
<p><img alt="even the MadHatter is surprised" src="../img/madhatter.jpg" /></p>
<p>Imagine that once <strong>Alice</strong> is holding <strong>credentials</strong> she can enter
any room in Wonderland and drop a <strong>proof</strong> in the chest at its
entrance: this proof can be verified by anyone without disclosing
Alice's identity.</p>
<p>The flow described above is pretty simple, but the steps to setup the
<strong>credential</strong> are a bit more complex. Lets start using real names
from now on:</p>
<ul>
<li>Alice is a credential <strong>Holder</strong></li>
<li>MadHatter is a credential <strong>Issuer</strong></li>
<li>Wonderland is a public <strong>Blockchain</strong></li>
<li>Anyone is any peer connected to the blockchain</li>
</ul>
<p><img alt="Zencode flow for ABC" src="../img/zkp_abc_flow.svg" /></p>
<p>To add more detail, the sequence is:</p>
<p><img alt="Zencode sequence for ABC" src="../img/zkp_abc.svg" /></p>
<p>1 <strong>MadHatter</strong> generates an <strong>issuer keypair</strong>
<table><tr><th>Input</th><th>Zencode</th><th>Output</th></tr>
<tr><td> - </td><td><pre>
Scenario coconut: issuer keygen
Given that I am known as 'MadHatter'
When I create the issuer keypair
Then print my 'issuer keypair'
</pre></td>
<td>issuer_keypair</td>
</tr></table></p>
<p>1a <strong>MadHatter</strong> publishes the <strong>verification key</strong>
<table><tr><th>Input</th><th>Zencode</th><th>Output</th></tr>
<tr><td> issuer_keypair </td><td><pre>
Scenario coconut: publish verifier
Given that I am known as 'MadHatter'
and I have my valid 'verifier'
Then print my 'verifier'
</pre></td>
<td>issuer_verifier</td>
</tr></table></p>
<p>2 <strong>Alice</strong> generates her <strong>credential keypair</strong>
<table><tr><th>Input</th><th>Zencode</th><th>Output</th></tr>
<tr><td> - </td><td><pre>
Scenario coconut: credential keygen
Given that I am known as 'Alice'
When I create the credential keypair
Then print my 'credential keypair'
</pre></td>
<td>credential_keypair</td>
</tr></table></p>
<p>3 <strong>Alice</strong> sends her <strong>credential signature request</strong>
<table><tr><th>Input</th><th>Zencode</th><th>Output</th></tr>
<tr><td> credential_keypair </td><td><pre>
Scenario coconut: create request
Given that I am known as 'Alice'
and I have my valid 'credential keypair'
When I create the credential request
Then print my 'credential request'
</pre></td>
<td>credential_request</td>
</tr></table></p>
<p>4 <strong>MadHatter</strong> decides to sign a <strong>credential signature request</strong>
<table><tr><th>Input</th><th>Zencode</th><th>Output</th></tr>
<tr><td> credential_request<br/>issuer_keypair </td><td><pre>
Scenario coconut: issuer sign
Given that I am known as 'MadHatter'
and I have my valid 'issuer keypair'
and I have a valid 'credential request'
When I create the credential signature
Then print the 'credential signature'
and print the 'verifier'
</pre></td>
<td>issuer_signature</td>
</tr></table></p>
<p>5 <strong>Alice</strong> receives and aggregates the signed <strong>credential</strong>
<table><tr><th>Input</th><th>Zencode</th><th>Output</th></tr>
<tr><td> issuer_signature<br/>credential_keypair </td><td><pre>
Scenario coconut: aggregate signature
Given that I am known as 'Alice'
and I have my valid 'credential keypair'
and I have a valid 'credential signature'
When I create the credentials
Then print my 'credentials'
and print my 'credential keypair'
</pre></td>
<td>credential</td>
</tr></table></p>
<h2 id="centralized-credential-issuance">Centralized credential issuance</h2>
<p>Lets see how flexible is Zencode.</p>
<p>The flow described above is for a fully decentralized issuance of
<strong>credentials</strong> where only the <strong>Holder</strong> is in possession of the
<strong>credential keypair</strong> needed to produce a <strong>credential proof</strong>.</p>
<p>But let's immagine a much more simple use-case for a more centralized
system where the <strong>Issuer</strong> provides the <strong>Holder</strong> with everything
ready to go to produce zero knowledge credential proofs.</p>
<p>The implementation is very, very simple: just line up all the <strong>When</strong>
blocks where the different operations are done at different times and
print the results all together!</p>
<div class="codehilite"><pre><span class="nf">Scenario coconut</span>
<span class="k">Given </span><span class="nf">that I am known as &#39;Issuer&#39;</span>
<span class="k">When </span><span class="nf">I create the issuer keypair</span>
<span class="nf">and I create the credential keypair</span>
<span class="nf">and I create the credential request</span>
<span class="nf">and I create the credential signature</span>
<span class="nf">and I create the credentials</span>
<span class="k">Then </span><span class="nf">print the &#39;credentials&#39;</span>
<span class="nf">and print the &#39;credential keypair&#39;</span>
</pre></div>


<p>This will produce <strong>credentials</strong> that anyone can take and run. Just
beware that in this simplified version of ABC the <strong>Issuer</strong> may
maliciously keep the <strong>credential keypair</strong> and impersonate the
<strong>Holder</strong>.</p>
<p><span class="big">
<span class="mdi mdi-lightbulb-on-outline"></span>
<b>Try it on your system!</b>
</span></p>
<p>Impatient to give it a spin? run Zencode scripts locally to see what
are the files produced!</p>
<p>Make sure that Zenroom is installed on your PC
and then go to the...</p>
<p><span class="big"> <span class="mdi mdi-cogs"></span> <a href="/examples/shell_scripts">Shell Script
Examples</a> </span></p>
<h1 id="zero-knowledge-proofs">Zero Knowledge Proofs</h1>
<p>There is more to this of course: Zencode supports several features
based on pairing elliptic curve arithmetics and in particular:</p>
<ul>
<li>non-interactive zero knowedge proofs (also known as ZKP or ZK-Snarks)</li>
<li>threshold credentials with multiple decentralised issuers</li>
<li>homomorphic encryption for numeric counters</li>
</ul>
<p>These are all very useful features for architectures based on the
decentralisation of trust, typical of <strong>DLT and blockchain based
systems, as well for off-line and non-interactive authentication</strong>.</p>
<p>The Zencode language leverages two main scenarios, more will be
implemented in the future.</p>
<ol>
<li>Attribute Based Credentials (ABC) where issuer verification keys
   represent specific credentials</li>
<li>A Petition system based on ABC and homomorphic encryption</li>
</ol>
<p>Three more are in the work and they are:</p>
<ol>
<li>Anonymous proxy validation scheme</li>
<li>Token thumbler to privately transfer numeric assets</li>
<li>Private credential revokation</li>
</ol>
<h1 id="symmetric-encryption">Symmetric encryption</h1>
<p>This is a simple tecnique to hide a secret using a common password known to all people.</p>
<p>The algorithm used is
<a href="https://en.wikipedia.org/wiki/Galois/Counter_Mode">AES-GCM</a> with an optional authenticated header (<a href="https://en.wikipedia.org/wiki/Authenticated_encryption">AEAD</a>)</p>
<p>It is applied using 3 arguments:</p>
<ul>
<li><code>message</code> is the object to be encrypted</li>
<li><code>secret</code> is the secret password used to encrypt</li>
<li><code>header</code> (optional) the authenticated header</li>
</ul>
<p>The arguments must be already given at the moment of using the when
block:</p>
<div class="codehilite"><pre><span class="k">When </span><span class="nf">I encrypt the secret message &#39;whisper&#39; with &#39;my password&#39;</span>
</pre></div>


<p>The output is returned in <code>secret message</code> and it looks like:</p>
<div class="codehilite"><pre><span class="p">{</span><span class="nt">&quot;secret_message&quot;</span><span class="p">:</span>
<span class="p">{</span><span class="nt">&quot;iv&quot;</span><span class="p">:</span><span class="s2">&quot;u64:aeBQ9CrdLfg24_QhtTJ0c1eEamvprfoOiVVbcfuyUFM&quot;</span><span class="p">,</span>
<span class="nt">&quot;header&quot;</span><span class="p">:</span><span class="s2">&quot;u64:dGhpc19pc190aGVfaGVhZGVy&quot;</span><span class="p">,</span>
<span class="nt">&quot;text&quot;</span><span class="p">:</span><span class="s2">&quot;u64:DaOlZtRNS-j9671noYQuN0c-PrxdhbjSZVQLYdNw-5W-rA5Gd36bNUm01srnleY&quot;</span><span class="p">,</span>
<span class="nt">&quot;checksum&quot;</span><span class="p">:</span><span class="s2">&quot;u64:ewKri7ghI3nO0bPJtwZcbA&quot;</span><span class="p">},</span>
<span class="nt">&quot;zenroom&quot;</span><span class="p">:{</span><span class="nt">&quot;curve&quot;</span><span class="p">:</span><span class="s2">&quot;goldilocks&quot;</span><span class="p">,</span><span class="nt">&quot;encoding&quot;</span><span class="p">:</span><span class="s2">&quot;url64&quot;</span><span class="p">,</span><span class="nt">&quot;version&quot;</span><span class="p">:</span><span class="s2">&quot;1.0.0&quot;</span><span class="p">}}</span>
</pre></div>


<p>To decode make sure to have that secret password and that a valid <code>secret message</code> is given, then use:</p>
<div class="codehilite"><pre><span class="k">When </span><span class="nf">I decrypt the secret message with &#39;my password&#39;</span>
</pre></div>


<p>So let's imagine I want to share a secret with someone and send secret messages encrypted with it:</p>
<p><img alt="Zencode to encrypt with password" src="../img/aes_crypt.svg" /></p>
<p>I will need 3 Zencode contracts executed at different times:</p>
<p><strong>1. I generate a strong random secret</strong></p>
<div class="codehilite"><pre><span class="nf">rule check version </span><span class="s">1.0.0</span><span class="nf"></span>
<span class="nf">Scenario simple: Generate a random secret</span>
<span class="k">Given </span><span class="nf">nothing</span>
<span class="k">When </span><span class="nf">I create a random &#39;secret&#39;</span>
<span class="k">Then </span><span class="nf">print the &#39;secret&#39;</span>
</pre></div>


<p>-&gt; then save the secret output and send it</p>
<p><strong>2. I encrypt a message using this secret</strong></p>
<div class="codehilite"><pre><span class="nf">rule check version </span><span class="s">1.0.0</span><span class="nf"></span>
<span class="nf">Scenario simple: Encrypt a message with the secret</span>
<span class="k">Given </span><span class="nf">I have a &#39;secret&#39;</span>
<span class="k">When </span><span class="nf">I write &#39;a very short but very very confidential message&#39; in &#39;whisper&#39;</span>
<span class="nf">and I write &#39;this is the header&#39; in &#39;header&#39;</span>
<span class="nf">and I encrypt the secret message &#39;whisper&#39; with &#39;secret&#39;</span>
<span class="k">Then </span><span class="nf">print the &#39;secret message&#39;</span>
</pre></div>


<p>-&gt; then save the secret message and send it</p>
<p><strong>3. Who has my secret can decrypt the secret message</strong></p>
<div class="codehilite"><pre><span class="nf">rule check version </span><span class="s">1.0.0</span><span class="nf"></span>
<span class="nf">Scenario simple: Decrypt the message with the secret</span>
<span class="k">Given </span><span class="nf">i have a &#39;secret&#39;</span>
<span class="nf">and i have a valid &#39;secret message&#39;</span>
<span class="k">When </span><span class="nf">I decrypt the secret message with &#39;secret&#39;</span>
<span class="k">Then </span><span class="nf">print as &#39;string&#39; the &#39;text&#39; inside &#39;message&#39;</span>
<span class="nf">and print as &#39;string&#39; the &#39;header&#39; inside &#39;message&#39;</span>
</pre></div>


<p>Of course the secret must be known by all participats and that's the
dangerous part, since it could be stolen at the moment is told.</p>
<p>We solve this problem using <strong>public-key cryptography</strong>, also known as a-symmetric encryption, explained in the next section.</p>
<h1 id="asymmetric-encryption">Asymmetric encryption</h1>
<p>We use <a href="https://en.wikipedia.org/wiki/Public-key_cryptography">asymmetric encryption (or public key
cryptography)</a>
when we want to introduce the possession of keypairs (public and private) both by
Alice and Bob: this way there is no need for a single secret to be known to both.</p>
<p>Fortunately it is pretty simple to do using Zencode in 2 steps</p>
<ul>
<li>Key generation and exchange (<a href="https://en.wikipedia.org/wiki/Key_exchange">SETUP</a>)</li>
<li>Public-key Encryption or signature (<a href="https://en.wikipedia.org/wiki/Elliptic-curve_Diffie%E2%80%93Hellman">ECDH</a> and <a href="https://en.wikipedia.org/wiki/Elliptic_Curve_Digital_Signature_Algorithm">ECDSA</a>)</li>
</ul>
<h2 id="key-generation-and-exchange">Key generation and exchange</h2>
<p>In this phase each participant will create his/her own keypair, store it and communicate the public key to the other.</p>
<p>The statement to generate a keypair (public and private keys) is simple:</p>
<div class="codehilite"><pre><span class="k">When </span><span class="nf">I create the keypair</span>
</pre></div>


<p>It will produce something like this:</p>
<div class="codehilite"><pre><span class="s2">&quot;Alice&quot;</span><span class="err">:</span> <span class="p">{</span>
   <span class="nt">&quot;keypair&quot;</span><span class="p">:</span> <span class="p">{</span>
      <span class="nt">&quot;private_key&quot;</span><span class="p">:</span> <span class="s2">&quot;u64:F_NaS3Y6Xw6BW...&quot;</span><span class="p">,</span>
      <span class="nt">&quot;public_key&quot;</span><span class="p">:</span> <span class="s2">&quot;u64:BLG0OGDwzP_gY41TZgGpUB4lTYCgpx9BJVScxSQAfwqEi...&quot;</span>
   <span class="p">}</span>
<span class="p">}</span>
</pre></div>


<p>Where the public key is usually a longer octet and actually an <a href="/lua/modules/ECP.html">Elliptic Curve Point</a> coordinate.</p>
<p>There is nothing preventing an host application to separate these JSON
fields and store them in any secure way.</p>
<p>Here we demonstrate how to create keypairs as well separate them using
Zencode:</p>
<ul>
<li>2 contracts to create Alice and Bob keypairs</li>
<li>2 contracts to separate the public key from the private key for each</li>
</ul>
<p><img alt="Zencode to generate asymmetric keypairs" src="../img/ecdh_keygen.svg" /></p>
<p>After both Alice and Bob have their own keypairs and they both know
each other public key we can move forward to do asymmetric encryption
and signatures.</p>
<p><strong>1.a Alice keygen</strong></p>
<div class="codehilite"><pre><span class="nf">Rule check version </span><span class="s">1.0.0</span><span class="nf"></span>
<span class="nf">Scenario &#39;simple&#39;: Alice generate a keypair</span>
<span class="k">Given </span><span class="nf">that I am known as &#39;Alice&#39;</span>
<span class="k">When </span><span class="nf">I create the keypair</span>
<span class="k">Then </span><span class="nf">print my data</span>
</pre></div>


<p><strong>2.a Alice pubkey</strong></p>
<div class="codehilite"><pre><span class="nf">Rule check version </span><span class="s">1.0.0</span><span class="nf"></span>
<span class="nf">Scenario &#39;simple&#39;: Alice publishes her public key</span>
<span class="k">Given </span><span class="nf">that I am known as &#39;Alice&#39;</span>
<span class="nf">and I have my valid &#39;public key&#39;</span>
<span class="k">Then </span><span class="nf">print my data</span>
</pre></div>


<p><strong>1.b Bob keygen</strong></p>
<div class="codehilite"><pre><span class="nf">Rule check version </span><span class="s">1.0.0</span><span class="nf"></span>
<span class="nf">Scenario &#39;simple&#39;: Bob generate a keypair</span>
<span class="k">Given </span><span class="nf">that I am known as &#39;Bob&#39;</span>
<span class="k">When </span><span class="nf">I create the keypair</span>
<span class="k">Then </span><span class="nf">print my data</span>
</pre></div>


<p><strong>2.b Bob pubkey</strong></p>
<div class="codehilite"><pre><span class="nf">Rule check version </span><span class="s">1.0.0</span><span class="nf"></span>
<span class="nf">Scenario &#39;simple&#39;: Bob publishes his public key</span>
<span class="k">Given </span><span class="nf">that I am known as &#39;Bob&#39;</span>
<span class="nf">and I have my valid &#39;public key&#39;</span>
<span class="k">Then </span><span class="nf">print my data</span>
</pre></div>


<h2 id="public-key-encryption-ecdh">Public-key Encryption (ECDH)</h2>
<p>Public key encryption is similar to the <a href="#asymmetric-encryption">asymmetric
encryption</a> explained in the previous section,
with a difference: the <code>for</code> clause indicates the public key of the
recipient.</p>
<p>Before getting to the encryption 2 other objects must be given:</p>
<ul>
<li><code>keypair</code> is one's own public and private keys</li>
<li><code>public key</code> from the intended recipient</li>
</ul>
<p>So a typical <code>Given</code> section preparing for encryption looks like:</p>
<div class="codehilite"><pre><span class="k">Given </span><span class="nf">that I am known as &#39;Alice&#39;</span>
<span class="nf">and I have my valid &#39;keypair&#39;</span>
<span class="nf">and I have a valid &#39;public key&#39; from &#39;Bob&#39;</span>
</pre></div>


<p>which accepts an input like:</p>
<div class="codehilite"><pre><span class="p">[</span>
  <span class="p">{</span><span class="nt">&quot;Bob&quot;</span><span class="p">:</span> <span class="p">{</span><span class="nt">&quot;public_key&quot;</span><span class="p">:</span><span class="s2">&quot;u64:BGF59uMP0DkHoTjMT...&quot;</span><span class="p">}</span> <span class="p">},</span>
  <span class="p">{</span><span class="nt">&quot;Alice&quot;</span><span class="p">:</span> <span class="p">{</span> <span class="nt">&quot;keypair&quot;</span><span class="p">:</span> <span class="p">{</span>
      <span class="nt">&quot;private_key&quot;</span><span class="p">:</span> <span class="s2">&quot;u64:F_NaS3Y6Xw6BW...&quot;</span><span class="p">,</span>
      <span class="nt">&quot;public_key&quot;</span><span class="p">:</span> <span class="s2">&quot;u64:BLG0OGDwzP_gY41TZgGpUB4lTYCgpx9BJVScxSQAfwqEi...&quot;</span> <span class="p">}</span> <span class="p">}</span> <span class="p">}</span>
<span class="p">]</span>
</pre></div>


<p>then the Zencode contract continues with the line:</p>
<div class="codehilite"><pre><span class="k">When </span><span class="nf">I encrypt the secret message &#39;whisper&#39; for &#39;Bob&#39;</span>
</pre></div>


<p>which encrypts and stores results in <code>secret message</code>; also in this case <code>header</code> may be given, then is included in the encryption as an authenticated clear-text section.</p>
<p><img alt="Zencode to encrypt using asymmetric keypairs" src="../img/ecdh_crypt.svg" /></p>
<p><strong>1. Alice encrypts the message using Bob's public key</strong></p>
<div class="codehilite"><pre><span class="nf">Rule check version </span><span class="s">1.0.0</span><span class="nf"></span>
<span class="nf">Scenario &#39;simple&#39;: Alice encrypts a message for Bob</span>
<span class="k">Given </span><span class="nf">that I am known as &#39;Alice&#39;</span>
<span class="nf">and I have my valid &#39;keypair&#39;</span>
<span class="nf">and I have a valid &#39;public key&#39; from &#39;Bob&#39;</span>
<span class="k">When </span><span class="nf">I write &#39;This is my secret message.&#39; in &#39;message&#39;</span>
<span class="nf">and I write &#39;This is the header&#39; in &#39;header&#39;</span>
<span class="nf">and I encrypt the message for &#39;Bob&#39;</span>
<span class="k">Then </span><span class="nf">print the &#39;secret message&#39;</span>
</pre></div>


<p><strong>2. Bob prepares a keyring with Alice's public key</strong></p>
<div class="codehilite"><pre><span class="nf">Rule check version </span><span class="s">1.0.0</span><span class="nf"></span>
<span class="nf">Scenario &#39;simple&#39;: Bob gathers public keys in his keyring</span>
<span class="k">Given </span><span class="nf">that I am &#39;Bob&#39;</span>
<span class="nf">and I have my valid &#39;keypair&#39;</span>
<span class="nf">and I have a valid &#39;public key&#39; from &#39;Alice&#39;</span>
<span class="k">Then </span><span class="nf">print my &#39;keypair&#39;</span>
<span class="nf">and print the &#39;public key&#39;</span>
</pre></div>


<p><strong>3. Bob decrypts the message using Alice's public key</strong></p>
<div class="codehilite"><pre><span class="nf">Rule check version </span><span class="s">1.0.0</span><span class="nf"></span>
<span class="nf">Scenario &#39;simple&#39;: Bob decrypts the message from Alice</span>
<span class="k">Given </span><span class="nf">that I am known as &#39;Bob&#39;</span>
<span class="nf">and I have my valid &#39;keypair&#39;</span>
<span class="nf">and I have a valid &#39;public key&#39; from &#39;Alice&#39;</span>
<span class="nf">and I have a valid &#39;secret message&#39;</span>
<span class="k">When </span><span class="nf">I decrypt the secret message from &#39;Alice&#39;</span>
<span class="k">Then </span><span class="nf">print as &#39;string&#39; the &#39;message&#39;</span>
<span class="nf">and print as &#39;string&#39; the &#39;header&#39; inside &#39;secret message&#39;</span>
</pre></div>


<p>In this basic example the session key for encryption is made combining
the private key of Alice and the public key of Bob (or
viceversa).</p>
<div class="codehilite"><pre><span class="k">When </span><span class="nf">I write &#39;my secret for you&#39; in &#39;message&#39;</span>
<span class="nf">and I write &#39;an authenticated message&#39; in &#39;header&#39;</span>
</pre></div>


<p>The decryption will always check that the header hasn't changed,
maintaining the integrity of the string which may contain important
public information that accompany the secret.</p>
<h2 id="public-key-signature-ecdsa">Public-key Signature (ECDSA)</h2>
<p>Public-key signing allows to verify the integrity of a message by
knowing the public key of all those who have signed it.</p>
<p>It is very useful when in need of authenticating documents: any change
to the content of a document, even one single bit, will make the
verification fail, showing that something has been tampered with.</p>
<p>The one signing only needs his/her own keypair, so the key setup will
be made by the lines:</p>
<div class="codehilite"><pre><span class="k">Given </span><span class="nf">that I am known as &#39;Alice&#39;</span>
<span class="nf">and I have my valid &#39;keypair&#39;</span>
</pre></div>


<p>then assuming that the document to sign is in <code>draft</code>, Alice can
proceed signing it with:</p>
<div class="codehilite"><pre><span class="nf">and I create the signature of &#39;draft&#39;</span>
</pre></div>


<p>which will produce a new object <code>signature</code> to be printed along the
draft: the original message stays intact and the signature is detached.</p>
<p>On the other side Bob will need Alice's public key to verify the
signature with the line:</p>
<div class="codehilite"><pre><span class="k">When </span><span class="nf">I verify the &#39;draft&#39; is signed by &#39;Alice&#39;</span>
</pre></div>


<p>which will fail in case the signature is invalid or the document has
been tampered with.</p>
<p><img alt="Zencode to sign using asymmetric keypairs" src="../img/ecdsa_sign.svg" /></p>
<p>Here we continue assuming that the keyrings are already prepared with
public/private keypairs and the public keypair of the correspondent.</p>
<p><strong>1. Alice signs a message for Bob</strong></p>
<div class="codehilite"><pre><span class="nf">Rule check version </span><span class="s">1.0.0</span><span class="nf"></span>
<span class="nf">Scenario &#39;simple&#39;: Alice signs a message for Bob</span>
<span class="k">Given </span><span class="nf">that I am known as &#39;Alice&#39;</span>
<span class="nf">and I have my valid &#39;keypair&#39;</span>
<span class="k">When </span><span class="nf">I write &#39;This is my signed message to Bob.&#39; in &#39;draft&#39;</span>
<span class="nf">and I create the signature of &#39;draft&#39;</span>
<span class="k">Then </span><span class="nf">print my &#39;signature&#39;</span>
<span class="nf">and print my &#39;draft&#39;</span>
</pre></div>


<p><strong>1. Bob verifies the signed message from Alice</strong></p>
<div class="codehilite"><pre><span class="nf">rule check version </span><span class="s">1.0.0</span><span class="nf"></span>
<span class="nf">Scenario &#39;simple&#39;: Bob verifies the signature from Alice</span>
<span class="k">Given </span><span class="nf">that I am known as &#39;Bob&#39;</span>
<span class="nf">and I have a valid &#39;public key&#39; from &#39;Alice&#39;</span>
<span class="nf">and I have a valid &#39;signature&#39; from &#39;Alice&#39;</span>
<span class="nf">and I have a &#39;draft&#39;</span>
<span class="k">When </span><span class="nf">I verify the &#39;draft&#39; is signed by &#39;Alice&#39;</span>
<span class="k">Then </span><span class="nf">print &#39;signature&#39; &#39;correct&#39; as &#39;string&#39;</span>
<span class="nf">and print as &#39;string&#39; the &#39;draft&#39;</span>
</pre></div>


<p>In this example Alice uses her private key to sign and authenticate a
message. Bob or anyone else can use Alice's public key to prove that
the integrity of the message is kept intact and that she signed it.</p>
<h1 id="syntax-and-memory-model">Syntax and Memory model</h1>
<p>Zencode contracts operate in 3 phases:</p>
<ol>
<li><strong>Given</strong> - validates the input</li>
<li><strong>When</strong> - processes the contents</li>
<li><strong>Then</strong> - prints out the results</li>
</ol>
<p>The 3 separate blocks of code also correspond to 3 separate memory areas, sealed by some security measures.</p>
<p><img alt="Zencode documentation diagram" src="../img/zencode_diagram.png" /></p>
<p>All data processed has first to pass the validation phase according to scenario specific data schemas.</p>
<p><span class="mdi mdi-lightbulb-on-outline"></span>
<strong>Good Practice</strong>: start your Zencode noting down the Zenroom version you are using!</p>
<div class="codehilite"><pre><span class="n">rule</span> <span class="n">check</span> <span class="n">version</span> <span class="mf">1.0.0</span>
</pre></div>


<h2 id="given">Given</h2>
<h3 id="self-introduction">Self introduction</h3>
<p>This affects <strong>my</strong> statements</p>
<div class="codehilite"><pre><span class="k">Given </span><span class="nf">I introduce myself as &#39;&#39;</span>
<span class="k">Given </span><span class="nf">I am known as &#39;&#39;</span>
<span class="k">Given </span><span class="nf">I am &#39;&#39;</span>
<span class="k">Given </span><span class="nf">I have my &#39;&#39;</span>
<span class="k">Given </span><span class="nf">I have my valid &#39;&#39;</span>
</pre></div>


<p>Data provided as input (from <strong>data</strong> and <strong>keys</strong>) is all imported
automatically from <strong>JSON</strong> or <a href="https://tools.ietf.org/html/rfc7049">CBOR</a> binary formats.</p>
<p>Scenarios can add Schema for specific data validation mapped to <strong>words</strong> like: <strong>signature</strong>, <strong>proof</strong> or <strong>secret</strong>.</p>
<p><strong>Data input</strong></p>
<div class="codehilite"><pre><span class="k">Given </span><span class="nf">I have a &#39;&#39;</span>
<span class="k">Given </span><span class="nf">I have a valid &#39;&#39;</span>
<span class="k">Given </span><span class="nf">I have a &#39;&#39; inside &#39;&#39;</span>
<span class="k">Given </span><span class="nf">I have a valid &#39;&#39; inside &#39;&#39;</span>
<span class="k">Given </span><span class="nf">I have a &#39;&#39; from &#39;&#39;</span>
<span class="k">Given </span><span class="nf">I have a valid &#39;&#39; from &#39;&#39;</span>
<span class="k">Given </span><span class="nf">the &#39;&#39; is valid</span>
</pre></div>


<p>or check emptyness:</p>
<div class="codehilite"><pre><span class="k">Given </span><span class="nf">nothing</span>
</pre></div>


<p>When <strong>valid</strong> is specified then extra checks are made on input value,
mostly according to the <strong>scenario</strong></p>
<p><strong>Settings</strong></p>
<div class="codehilite"><pre><span class="n">rule</span> <span class="n">input</span> <span class="n">encoding</span> <span class="p">[</span> <span class="n">url64</span> <span class="o">|</span> <span class="n">base64</span> <span class="o">|</span> <span class="n">hex</span> <span class="o">|</span> <span class="n">bin</span> <span class="p">]</span>
<span class="n">rule</span> <span class="n">input</span> <span class="n">format</span> <span class="p">[</span> <span class="n">json</span> <span class="o">|</span> <span class="n">cbor</span> <span class="p">]</span>
</pre></div>


<h2 id="when">When</h2>
<p>Processing data is done in the when block. Also scenarios add statements to this block.</p>
<p>Without extensions, these are the basic functions available</p>
<div class="codehilite"><pre><span class="l-Scalar-Plain">when</span><span class="p-Indicator">:</span>
  <span class="p-Indicator">-</span> <span class="p-Indicator">{</span><span class="nv">when</span><span class="p-Indicator">:</span> <span class="s">&#39;I</span><span class="nv"> </span><span class="s">append</span><span class="nv"> </span><span class="se">&#39;&#39;&#39;&#39;</span><span class="nv"> </span><span class="s">to</span><span class="nv"> </span><span class="se">&#39;&#39;&#39;&#39;</span><span class="s">&#39;</span><span class="p-Indicator">}</span>
  <span class="p-Indicator">-</span> <span class="p-Indicator">{</span><span class="nv">when</span><span class="p-Indicator">:</span> <span class="s">&#39;I</span><span class="nv"> </span><span class="s">write</span><span class="nv"> </span><span class="se">&#39;&#39;&#39;&#39;</span><span class="nv"> </span><span class="s">in</span><span class="nv"> </span><span class="se">&#39;&#39;&#39;&#39;</span><span class="s">&#39;</span><span class="p-Indicator">}</span>
  <span class="p-Indicator">-</span> <span class="p-Indicator">{</span><span class="nv">when</span><span class="p-Indicator">:</span> <span class="s">&#39;I</span><span class="nv"> </span><span class="s">set</span><span class="nv"> </span><span class="se">&#39;&#39;&#39;&#39;</span><span class="nv"> </span><span class="s">to</span><span class="nv"> </span><span class="se">&#39;&#39;&#39;&#39;</span><span class="s">&#39;</span><span class="p-Indicator">}</span>
  <span class="p-Indicator">-</span> <span class="p-Indicator">{</span><span class="nv">when</span><span class="p-Indicator">:</span> <span class="s">&#39;I</span><span class="nv"> </span><span class="s">create</span><span class="nv"> </span><span class="s">a</span><span class="nv"> </span><span class="s">random</span><span class="nv"> </span><span class="se">&#39;&#39;&#39;&#39;</span><span class="s">&#39;</span><span class="p-Indicator">}</span>
  <span class="p-Indicator">-</span> <span class="p-Indicator">{</span><span class="nv">when</span><span class="p-Indicator">:</span> <span class="s">&#39;I</span><span class="nv"> </span><span class="s">create</span><span class="nv"> </span><span class="s">a</span><span class="nv"> </span><span class="s">random</span><span class="nv"> </span><span class="s">array</span><span class="nv"> </span><span class="s">of</span><span class="nv"> </span><span class="se">&#39;&#39;&#39;&#39;</span><span class="nv"> </span><span class="s">elements&#39;</span><span class="p-Indicator">}</span>
  <span class="p-Indicator">-</span> <span class="p-Indicator">{</span><span class="nv">when</span><span class="p-Indicator">:</span> <span class="s">&#39;I</span><span class="nv"> </span><span class="s">create</span><span class="nv"> </span><span class="s">a</span><span class="nv"> </span><span class="s">random</span><span class="nv"> </span><span class="se">&#39;&#39;&#39;&#39;</span><span class="nv"> </span><span class="s">bit</span><span class="nv"> </span><span class="s">array</span><span class="nv"> </span><span class="s">of</span><span class="nv"> </span><span class="se">&#39;&#39;&#39;&#39;</span><span class="nv"> </span><span class="s">elements&#39;</span><span class="p-Indicator">}</span>
  <span class="p-Indicator">-</span> <span class="p-Indicator">{</span><span class="nv">when</span><span class="p-Indicator">:</span> <span class="s">&#39;I</span><span class="nv"> </span><span class="s">set</span><span class="nv"> </span><span class="se">&#39;&#39;&#39;&#39;</span><span class="nv"> </span><span class="s">as</span><span class="nv"> </span><span class="se">&#39;&#39;&#39;&#39;</span><span class="nv"> </span><span class="s">with</span><span class="nv"> </span><span class="se">&#39;&#39;&#39;&#39;</span><span class="s">&#39;</span><span class="p-Indicator">}</span>
  <span class="p-Indicator">-</span> <span class="p-Indicator">{</span><span class="nv">when</span><span class="p-Indicator">:</span> <span class="s">&#39;I</span><span class="nv"> </span><span class="s">append</span><span class="nv"> </span><span class="se">&#39;&#39;&#39;&#39;</span><span class="nv"> </span><span class="s">as</span><span class="nv"> </span><span class="se">&#39;&#39;&#39;&#39;</span><span class="nv"> </span><span class="s">to</span><span class="nv"> </span><span class="se">&#39;&#39;&#39;&#39;</span><span class="s">&#39;</span><span class="p-Indicator">}</span>
  <span class="p-Indicator">-</span> <span class="p-Indicator">{</span><span class="nv">when</span><span class="p-Indicator">:</span> <span class="s">&#39;I</span><span class="nv"> </span><span class="s">write</span><span class="nv"> </span><span class="se">&#39;&#39;&#39;&#39;</span><span class="nv"> </span><span class="s">as</span><span class="nv"> </span><span class="se">&#39;&#39;&#39;&#39;</span><span class="nv"> </span><span class="s">in</span><span class="nv"> </span><span class="se">&#39;&#39;&#39;&#39;</span><span class="s">&#39;</span><span class="p-Indicator">}</span>
</pre></div>


<h2 id="then">Then</h2>
<p>Output is all exported in JSON or CBOR</p>
<div class="codehilite"><pre><span class="l-Scalar-Plain">then</span><span class="p-Indicator">:</span>
  <span class="p-Indicator">-</span> <span class="p-Indicator">{</span><span class="nv">then</span><span class="p-Indicator">:</span> <span class="s">&#39;print</span><span class="nv"> </span><span class="se">&#39;&#39;&#39;&#39;</span><span class="nv"> </span><span class="se">&#39;&#39;&#39;&#39;</span><span class="s">&#39;</span><span class="p-Indicator">}</span>
  <span class="p-Indicator">-</span> <span class="p-Indicator">{</span><span class="nv">then</span><span class="p-Indicator">:</span> <span class="s">&#39;print</span><span class="nv"> </span><span class="s">all</span><span class="nv"> </span><span class="s">data&#39;</span><span class="p-Indicator">}</span>
  <span class="p-Indicator">-</span> <span class="p-Indicator">{</span><span class="nv">then</span><span class="p-Indicator">:</span> <span class="s">&#39;print</span><span class="nv"> </span><span class="s">my</span><span class="nv"> </span><span class="s">data&#39;</span><span class="p-Indicator">}</span>
  <span class="p-Indicator">-</span> <span class="p-Indicator">{</span><span class="nv">then</span><span class="p-Indicator">:</span> <span class="s">&#39;print</span><span class="nv"> </span><span class="s">my</span><span class="nv"> </span><span class="s">data&#39;</span><span class="p-Indicator">}</span>
  <span class="p-Indicator">-</span> <span class="p-Indicator">{</span><span class="nv">then</span><span class="p-Indicator">:</span> <span class="s">&#39;print</span><span class="nv"> </span><span class="s">my</span><span class="nv"> </span><span class="se">&#39;&#39;&#39;&#39;</span><span class="s">&#39;</span><span class="p-Indicator">}</span>
  <span class="p-Indicator">-</span> <span class="p-Indicator">{</span><span class="nv">then</span><span class="p-Indicator">:</span> <span class="s">&#39;print</span><span class="nv"> </span><span class="s">as</span><span class="nv"> </span><span class="se">&#39;&#39;&#39;&#39;</span><span class="nv"> </span><span class="s">my</span><span class="nv"> </span><span class="se">&#39;&#39;&#39;&#39;</span><span class="s">&#39;</span><span class="p-Indicator">}</span>
  <span class="p-Indicator">-</span> <span class="p-Indicator">{</span><span class="nv">then</span><span class="p-Indicator">:</span> <span class="s">&#39;print</span><span class="nv"> </span><span class="s">my</span><span class="nv"> </span><span class="se">&#39;&#39;&#39;&#39;</span><span class="nv"> </span><span class="s">as</span><span class="nv"> </span><span class="se">&#39;&#39;&#39;&#39;</span><span class="s">&#39;</span><span class="p-Indicator">}</span>
  <span class="p-Indicator">-</span> <span class="p-Indicator">{</span><span class="nv">then</span><span class="p-Indicator">:</span> <span class="s">&#39;print</span><span class="nv"> </span><span class="s">the</span><span class="nv"> </span><span class="se">&#39;&#39;&#39;&#39;</span><span class="s">&#39;</span><span class="p-Indicator">}</span>
  <span class="p-Indicator">-</span> <span class="p-Indicator">{</span><span class="nv">then</span><span class="p-Indicator">:</span> <span class="s">&#39;print</span><span class="nv"> </span><span class="s">as</span><span class="nv"> </span><span class="se">&#39;&#39;&#39;&#39;</span><span class="nv"> </span><span class="s">the</span><span class="nv"> </span><span class="se">&#39;&#39;&#39;&#39;</span><span class="s">&#39;</span><span class="p-Indicator">}</span>
  <span class="p-Indicator">-</span> <span class="p-Indicator">{</span><span class="nv">then</span><span class="p-Indicator">:</span> <span class="s">&#39;print</span><span class="nv"> </span><span class="s">as</span><span class="nv"> </span><span class="se">&#39;&#39;&#39;&#39;</span><span class="nv"> </span><span class="s">the</span><span class="nv"> </span><span class="se">&#39;&#39;&#39;&#39;</span><span class="nv"> </span><span class="s">inside</span><span class="nv"> </span><span class="se">&#39;&#39;&#39;&#39;</span><span class="s">&#39;</span><span class="p-Indicator">}</span>
</pre></div>


<p>Settings:</p>
<div class="codehilite"><pre><span class="n">rule</span> <span class="n">output</span> <span class="n">encoding</span> <span class="p">[</span> <span class="n">url64</span> <span class="o">|</span> <span class="n">base64</span> <span class="o">|</span> <span class="n">hex</span> <span class="o">|</span> <span class="n">bin</span> <span class="p">]</span>
<span class="n">rule</span> <span class="n">output</span> <span class="n">format</span> <span class="p">[</span> <span class="n">json</span> <span class="o">|</span> <span class="n">cbor</span> <span class="p">]</span>
</pre></div> 
						</div>
					</div>
				</div>
			</div>
		</section>
		<footer class="footer">
	<div class="content has-text-centered">
		<p>	<strong>Zenroom docs</strong> is Copyright (C) 2019 by the <a href="https://dyne.org">Dyne.org foundation</a>. The source code is licensed <a href="https://www.gnu.org/licenses/agpl-3.0.en.html">AGPLv3</a>. </p>
		<!-- <div class="columns is-gapless">
			 <div class="column is-one-fifth">
			 <img src="assets/img/eu-flag.png"></div>
			 <p class="column is-three-quarters"> -->
		
		<p>Funded by the European Unions Horizon 2020 research and
			innovation program, grant nr. 732546 (DECODE).</p>
		
		<!-- </div> -->
	</div>
</footer>
		
		   <script>

 (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
	 (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
						  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
 })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

 ga('create', 'UA-1857256-5', 'auto');
 ga('send', 'pageview');

</script> 
	</body>
</html>